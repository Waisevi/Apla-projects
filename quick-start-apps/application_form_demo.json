{
    "name": "Application form",
    "data": [
        {
            "Conditions": "ContractAccess(\"@1EditMenu\")",
            "Value": "MenuGroup(Title:Application Form, Icon:\"icon-arrow-right\"){\r\n    MenuItem(Title: Application Form, Page: DemoCreateCompany, Icon: \"icon-grid\")\r\n    MenuItem(Title: Property, Page: demo_property_list, Icon: \"icon-globe\")\r\n    MenuItem(Title: Companies, Page: DemoCompaniesList, Icon: \"icon-briefcase\")\r\n}",
            "Name": "default_menu",
            "Type": "menu"
        },
        {
            "Name": "pc_demo_companies",
            "Columns": "[{\"name\":\"delete\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"status\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"company_name\",\"type\":\"varchar\",\"conditions\":\"true\"},{\"name\":\"shareholders\",\"type\":\"json\",\"conditions\":\"true\"},{\"name\":\"date_register\",\"type\":\"datetime\",\"conditions\":\"true\"},{\"name\":\"business_scope\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"company_founder\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"business_premises\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"company_founder_procent\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}",
            "Type": "tables"
        },
        {
            "Name": "pc_demo_sharholders",
            "Columns": "[{\"name\":\"id_company\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"id_sharholder\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"procentsharholders\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}",
            "Type": "tables"
        },
        {
            "Name": "pc_property_demo",
            "Columns": "[{\"name\":\"del\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"area\",\"type\":\"double\",\"conditions\":\"true\"},{\"name\":\"name\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"type\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"coords\",\"type\":\"text\",\"conditions\":\"true\"},{\"name\":\"member_id\",\"type\":\"number\",\"conditions\":\"true\"},{\"name\":\"police_inspection\",\"type\":\"number\",\"conditions\":\"true\"}]",
            "Permissions": "{\"insert\":\"true\",\"update\":\"true\",\"new_column\":\"true\"}",
            "Type": "tables"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "Agriculture,Financial services,Entertainment and mass media,Industrial manufacturing,Real estate,Retail,Transportation,Utilities,Service businesses",
            "Name": "business_scope_demo",
            "Type": "app_params"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "Residential,Commercial,Land",
            "Name": "property_type",
            "Type": "app_params"
        },
        {
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Value": "SetTitle(Companies list)\r\nDiv(Class: content-wrapper){\r\n    Div(Class: col-md-12 panel panel-primary data-sweet-alert){\r\n        Form(){\r\n            Div(panel-heading, Div(Class:panel-title, Registered companies))\r\n            Div(Class: list-group-item){\r\n                Div(Class: table-responsive){\r\n                    DBFind(Name:pc_demo_companies,Source: src_prop).Custom(Reg_date){\r\n                        DateTime(#date_register#,DD.MM.YYYY HH:MI)\r\n                    }.Custom(bus_scope){\r\n                        DBFind(applications,src_app).Columns(\"name,id\").Where(\"name='Application form'\").Vars(appli)\r\n                        Span(Body: AppParam(App:#appli_id#,Name: business_scope_demo,Index: #business_scope#))\r\n                    }.Custom(View){      \r\n                        Button(Class: btn btn-default pull-right, Body: Em(Class:fa icon-eye), Page:ViewCompany, PageParams: \"company_id=#id#\")\r\n                    }.Custom(found){\r\n                        Span(Body: Address(#company_founder#))\r\n                    }.Where(\"status = 5 or status = 6\")\r\n                    Table(Source: src_prop,Columns:\"ID=id,Company name = company_name, Company founder = found,Type = bus_scope,Registration Date=Reg_date,=View\")\r\n                }\r\n            }\r\n            Div(Class: list-group)\r\n        }\r\n    }\r\n}",
            "Name": "DemoCompaniesList",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Value": "SetTitle(\"Application Form\")\r\nDiv(Class: content-wrapper){\r\n    Div(Class: row){\r\n        DBFind(applications,src_app).Columns(\"name,id\").Where(\"name='Application form'\").Vars(appli)\r\n        DBFind(Name: pc_demo_companies, Source: app).Vars(create).Where(\"company_founder=#key_id# and status != 4 and status != 6\")\r\n        DBFind(Name: members, Source: ava).Columns(\"id,member_name\").Custom(mem_shar){[Address(#id#)] #member_name#}.Where(\"id != #key_id#\")\r\n        If(#create_status# > 1){\r\n            Div(Class: col-md-6 panel-default data-sweet-alert){\r\n                Div(Class: list-group-item){\r\n                    Span(Class: h3,Body: Company id: #create_id#)\r\n                    Div(Class: panel-body){\r\n                       Div(Class: well box-placeholder){\r\n                            Span(Class: h4 text-bold, Body: Owner Company)\r\n                            DBFind(Name: pc_demo_companies,Source: src_kek).Columns(\"company_founder,company_founder_procent\").Vars(shar).WhereId(#create_id#)\r\n                            Div(Class: clearfix){\r\n                                Div(Class: pull-left){\r\n                                    P(Class: h4, Body: \"Founder ID\")\r\n                                }\r\n                                Div(Class: pull-right){\r\n                                    P(Class: h4, Body: Address(#shar_company_founder#))\r\n                                }\r\n                            }\r\n                            Div(Class: clearfix){\r\n                                Div(Class: pull-left){\r\n                                    P(Class: h4, Body: \"Percentage of shares in a company\")\r\n                                }\r\n                                Div(Class: pull-right){\r\n                                    P(Class: h4, Body: #shar_company_founder_procent# %)\r\n                                }\r\n                            }\r\n                        }\r\n                        Div(Class: well box-placeholder){\r\n                            Span(Class: h4 text-bold, Body: List of shareholders)\r\n                            DBFind(Name: pc_demo_sharholders,Source: src_sha).Columns(\"id_sharholder,procentsharholders,id_company\").Where(\"id_company=#create_id#\")\r\n                            ForList(Source: src_sha){\r\n                                DBFind(Name: members).Columns(\"id,member_name\").WhereId(#id_sharholder#).Vars(sharname)\r\n                                Div(Class: list-group){\r\n                                    Div(Class: clearfix){\r\n                                        Div(Class: pull-left){\r\n                                            P(Class: h4, Body: \"Shareholder ID\")\r\n                                        }\r\n                                        Div(Class: pull-right){\r\n                                            P(Class: h4, Body: Address(#id_sharholder#))\r\n                                        }\r\n                                    }\r\n                                    Div(Class: clearfix){\r\n                                        Div(Class: pull-left){\r\n                                            P(Class: h4, Body: \"Shareholder name\")\r\n                                        }\r\n                                        Div(Class: pull-right){\r\n                                            P(Class: h4, Body: #sharname_member_name#)\r\n                                        }\r\n                                    }\r\n                                    Div(Class: clearfix){\r\n                                        Div(Class: pull-left){\r\n                                            P(Class: h4, Body: \"Percentage of shares in a company\")\r\n                                        }\r\n                                        Div(Class: pull-right){\r\n                                            P(Class: h4, Body: #procentsharholders#%)\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        Span(Class: h3 ,Body: \"Company detail\")\r\n                        Div(Class: clearfix){\r\n                            Div(Class: pull-left){\r\n                                P(Class: h4 text-bold, Body: \"Company name:\")\r\n                            }\r\n                            Div(Class: pull-right){\r\n                                P(Class: h4, Body: \"#create_company_name#\")\r\n                            }\r\n                        }\r\n                        Div(Class: clearfix){\r\n                            Div(Class: pull-left){\r\n                                P(Class: h4 text-bold, Body: \"Business scope:\")\r\n                            }\r\n                            Div(Class: pull-right){\r\n                                P(Class: h4, Body: AppParam(App:#appli_id#,Name: business_scope_demo,Index:#create_business_scope#))    \r\n                            }\r\n                        }\r\n                        Div(Class: clearfix){\r\n                            Div(Class: pull-left){\r\n                                P(Class: h4 text-bold, Body: \"Bussiness premises:\")\r\n                            }\r\n                            Div(Class: pull-right){\r\n                                DBFind(Name: pc_property_demo, Source: src_property).WhereId(#create_business_premises#).Vars(promise)\r\n                                P(Class: h4, Body:#promise_name#)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            Div(Class: col-md-6 panel-default data-sweet-alert){\r\n                Div(panel){\r\n                    Div(panel-heading){Overall progress}\r\n                        Div(Class:panel-body){\r\n                            Div(){\r\n                                Div(){Span().Style(\r\n                                    display: block;\r\n                                    opacity: 0.7;\r\n                                    content: \"\";\r\n                                    position: absolute;\r\n                                    bottom: calc(100% +2px);\r\n                                    width: 2px;\r\n                                    height: 40px;\r\n                                    background-color: limegreen;\r\n                                    margin-left: 14px;\r\n                                    )\r\n                                }\r\n                                Span(Body: Em(Class:fa fa-bell)).Style(\r\n                                    display: flex;\r\n                                    -webkit-box-orient: horizontal;\r\n                                    -webkit-box-direction: normal;\r\n                                    flex-flow: row nowrap;\r\n                                    -webkit-box-pack: center;\r\n                                    justify-content: center;\r\n                                    -webkit-box-align: center;\r\n                                    align-items: center;\r\n                                    position: relative;\r\n                                    min-width: 30px;\r\n                                    min-height: 30px;\r\n                                    max-width: 30px;\r\n                                    max-height: 30px;\r\n                                    border-radius: 50%;\r\n                                    background-color: limegreen;\r\n                                    font-size: 16px;\r\n                                    color: #ffffff!important;\r\n                                    margin-right: 15px;\r\n                                )\r\n                                Span(Class:text-success,Body: Company name is approved)\r\n                            }.Style(\r\n                                display: flex;\r\n                                -webkit-box-orient: horizontal;\r\n                                -webkit-box-direction: normal;\r\n                                flex-flow: row nowrap;\r\n                                -webkit-box-pack: start;\r\n                                justify-content: flex-start;\r\n                                align-content: center;\r\n                                -webkit-box-align: center;\r\n                                align-items: center;\r\n                                opacity: 0.7;\r\n                                font-size: 22px;\r\n                            )\r\n                            Div(){\r\n                                If(#create_status#==2){ \r\n                                    Span(Body: Em(Class:fa fa-bell)).Style(\r\n                                        display: flex;\r\n                                        -webkit-box-orient: horizontal;\r\n                                        -webkit-box-direction: normal;\r\n                                        flex-flow: row nowrap;\r\n                                        -webkit-box-pack: center;\r\n                                        justify-content: center;\r\n                                        -webkit-box-align: center;\r\n                                        align-items: center;\r\n                                        position: relative;\r\n                                        min-width: 30px;\r\n                                        min-height: 30px;\r\n                                        max-width: 30px;\r\n                                        max-height: 30px;\r\n                                        border-radius: 50%;\r\n                                        background-color: red;\r\n                                        font-size: 16px;\r\n                                        color: #ffffff!important;\r\n                                        margin-right: 15px;\r\n                                    )\r\n                                    Span(Class: text-danger,Body:\"Expect the decision of the Police Inspection\") \r\n                                }.ElseIf(#create_status#>=3){\r\n                                    Div(){\r\n                                        Span().Style(\r\n                                            display: block;\r\n                                            opacity: 0.7;\r\n                                            content: \"\";\r\n                                            position: absolute;\r\n                                            bottom: calc(100% +2px);\r\n                                            width: 2px;\r\n                                            height: 40px;\r\n                                            background-color: limegreen;\r\n                                            margin-left: 14px;\r\n                                        )\r\n                                    }\r\n                                    Span(Body: Em(Class:fa fa-bell)).Style(\r\n                                        display: flex;\r\n                                        -webkit-box-orient: horizontal;\r\n                                        -webkit-box-direction: normal;\r\n                                        flex-flow: row nowrap;\r\n                                        -webkit-box-pack: center;\r\n                                        justify-content: center;\r\n                                        -webkit-box-align: center;\r\n                                        align-items: center;\r\n                                        position: relative;\r\n                                        min-width: 30px;\r\n                                        min-height: 30px;\r\n                                        max-width: 30px;\r\n                                        max-height: 30px;\r\n                                        border-radius: 50%;\r\n                                        background-color: limegreen;\r\n                                        font-size: 16px;\r\n                                        color: #ffffff!important;\r\n                                        margin-right: 15px;\r\n                                    )\r\n                                    Span(Class:text-success, Body:\"Police inspection\")    \r\n                                } \r\n                            }.Style(\r\n                                display: flex;\r\n                                -webkit-box-orient: horizontal;\r\n                                -webkit-box-direction: normal;\r\n                                flex-flow: row nowrap;\r\n                                -webkit-box-pack: start;\r\n                                justify-content: flex-start;\r\n                                align-content: center;\r\n                                -webkit-box-align: center;\r\n                                align-items: center;\r\n                                opacity: 0.7;\r\n                                font-size: 22px;\r\n                                margin-top: 22px;\r\n                            )\r\n                            Div(){\r\n                                If(#create_status# == 3){\r\n                                    Span(Body: Em(Class:fa fa-bell)).Style(\r\n                                        display: flex;\r\n                                        -webkit-box-orient: horizontal;\r\n                                        -webkit-box-direction: normal;\r\n                                        flex-flow: row nowrap;\r\n                                        -webkit-box-pack: center;\r\n                                        justify-content: center;\r\n                                        -webkit-box-align: center;\r\n                                        align-items: center;\r\n                                        position: relative;\r\n                                        min-width: 30px;\r\n                                        min-height: 30px;\r\n                                        max-width: 30px;\r\n                                        max-height: 30px;\r\n                                        border-radius: 50%;\r\n                                        background-color: red;\r\n                                        font-size: 16px;\r\n                                        color: #ffffff!important;\r\n                                        margin-right: 15px;\r\n                                    )\r\n                                    Span(Class: text-danger, Body:\"Expect the decision of the Ministry Economy.\") \r\n                                }.ElseIf(#create_status#==5){\r\n                                    Div(){Span().Style(\r\n                                        display: block;\r\n                                        opacity: 0.7;\r\n                                        content: \"\";\r\n                                        position: absolute;\r\n                                        bottom: calc(100% +2px);\r\n                                        width: 2px;\r\n                                        height: 40px;\r\n                                        background-color: limegreen;\r\n                                        margin-left: 14px;\r\n                                        )\r\n                                    }\r\n                                    Span(Body: Em(Class:fa fa-bell)).Style(\r\n                                        display: flex;\r\n                                        -webkit-box-orient: horizontal;\r\n                                        -webkit-box-direction: normal;\r\n                                        flex-flow: row nowrap;\r\n                                        -webkit-box-pack: center;\r\n                                        justify-content: center;\r\n                                        -webkit-box-align: center;\r\n                                        align-items: center;\r\n                                        position: relative;\r\n                                        min-width: 30px;\r\n                                        min-height: 30px;\r\n                                        max-width: 30px;\r\n                                        max-height: 30px;\r\n                                        border-radius: 50%;\r\n                                        background-color: limegreen;\r\n                                        font-size: 16px;\r\n                                        color: #ffffff!important;\r\n                                        margin-right: 15px;\r\n                                    )\r\n                                    Span(Class:text-success, Body:\"Decision of Ministry Economy.\") \r\n                                }\r\n                            }.Style(\r\n                                display: flex;\r\n                                -webkit-box-orient: horizontal;\r\n                                -webkit-box-direction: normal;\r\n                                flex-flow: row nowrap;\r\n                                -webkit-box-pack: start;\r\n                                justify-content: flex-start;\r\n                                align-content: center;\r\n                                -webkit-box-align: center;\r\n                                align-items: center;\r\n                                opacity: 0.7;\r\n                                font-size: 22px;\r\n                                margin-top: 22px;\r\n                            )\r\n                            Div(){\r\n                                If(#create_status# == 5){\r\n                                    Span(Body: Em(Class:fa fa-bell)).Style(\r\n                                        display: flex;\r\n                                        -webkit-box-orient: horizontal;\r\n                                        -webkit-box-direction: normal;\r\n                                        flex-flow: row nowrap;\r\n                                        -webkit-box-pack: center;\r\n                                        justify-content: center;\r\n                                        -webkit-box-align: center;\r\n                                        align-items: center;\r\n                                        position: relative;\r\n                                        min-width: 30px;\r\n                                        min-height: 30px;\r\n                                        max-width: 30px;\r\n                                        max-height: 30px;\r\n                                        border-radius: 50%;\r\n                                        background-color: deepskyblue;\r\n                                        font-size: 16px;\r\n                                        color: #ffffff!important;\r\n                                        margin-right: 15px;\r\n                                    )\r\n                                    Span(Class:text-info, Body: Company #create_company_name# registered DateTime(#create_date_register#, YYYY.MM.DD) - ID = #create_id#)  \r\n                                }\r\n                            }.Style(\r\n                                display: flex;\r\n                                -webkit-box-orient: horizontal;\r\n                                -webkit-box-direction: normal;\r\n                                flex-flow: row nowrap;\r\n                                -webkit-box-pack: start;\r\n                                justify-content: flex-start;\r\n                                align-content: center;\r\n                                -webkit-box-align: center;\r\n                                align-items: center;\r\n                                opacity: 0.7;\r\n                                font-size: 22px;\r\n                                margin-top: 22px;\r\n                            )\r\n                        }\r\n                        Div(Class: panel-footer pv-lg){\r\n                            Div(Class: clearfix){\r\n                                Div(Class: pull-right){\r\n                                    If(#create_company_founder#==#key_id#){\r\n                                        If(#create_status# == 5){\r\n                                            Form(){\r\n                                                Button(New,Contract:NewCompany,Class:btn btn-primary,Page:DemoCreateCompany,Params:\"company_id=#create_id#\")\r\n                                            }\r\n                                        }.Else{\r\n                                            Button(Check,Class:btn btn-primary,Page: DemoCreateCompany)\r\n                                        }\r\n                                    }\r\n                                }\r\n                                Div(Class: pull-left){\r\n                                    If(#create_status# != 5){\r\n                                        Button(Reset,Contract:ResetCompany,Class: btn btn-default,Params:\"reset_company=#create_id#\",Page:DemoCreateCompany)\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n        }.Else{\r\n            Div(Class:col-md-6 panel-primary data-sweet-alert){\r\n                Div(Class: panel-heading panel-title,Body: \"Application Form\")\r\n                If(#create_status# == 1){\r\n                    Form(){\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(\"Shareholder ID\")\r\n                                }\r\n                                Div(Class: col-md-5 mt-sm){\r\n                                    SetVar(create_fn,Address(#create_company_founder#))\r\n                                    Input(Name:founder_key,Disabled:\"true\",Value:#create_fn#)\r\n                                }\r\n                                Div(Class: col-md-2 mt-sm){\r\n                                    Input(Name:founderProcent, Type: text, Placeholder: %)\r\n                                }\r\n                                Div(col-md-1 mt-sm text-left){\r\n                                    \r\n                                }\r\n                                If(GetVar(cs)==\"\"){\r\n                                    SetVar(cs, Calculate( Exp: 0, Type: int))\r\n                                }\r\n                                If(#del# == 1){\r\n                                    SetVar(cs, Calculate( Exp: #cs# - 1, Type: int))\r\n                                }.Else{\r\n                                    SetVar(cs, Calculate( Exp: #cs# + 1, Type: int))\r\n                                }\r\n                                Range(params_range, 0, #cs#)\r\n                            }\r\n                            ForList(Source: params_range){\r\n                                Div(Class: row){\r\n                                    Div(Class: col-md-3 mt-sm text-right)\r\n                                    Div(Class: col-md-5 mt-sm){\r\n                                        Select(Name: person_id,Source:ava,NameColumn:mem_shar,ValueColumn: id)\r\n                                    }\r\n                                    Div(Class: col-md-2 mt-sm){\r\n                                        Input(Name:procentSharholders, Type: text, Placeholder: %)\r\n                                    }\r\n                                    Div(col-md-2 mt-sm text-center){\r\n                                        If(And(#cs#==#params_range_index#, #cs# > 0)){\r\n                                            LinkPage(Body: Em(Class: fa fa-trash fa-2x), PageParams: \"cs=#cs#,del=1\", Page: DemoCreateCompany)\r\n                                        }\r\n                                    }.Style(padding-top: 3px;)\r\n                                }\r\n                            }\r\n                            Div(row){\r\n                                Div(col-md-12){\r\n                                    Div(Class:text-center mt-lg){\r\n                                        Button(Body: \"Add Shareholder\", Class: btn btn-link, Page: DemoCreateCompany, PageParams: \"cs=#cs#\")\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(\"Company Name\")\r\n                                }\r\n                                Div(Class: col-md-9 mt-sm text-center){\r\n                                    Input(Name:company_name,Type:text,Class:form-control,Value:#create_company_name#)\r\n                                }\r\n                            }\r\n                        }\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(\"Business Scope\")\r\n                                }\r\n                                Div(Class: col-md-9 mt-sm text-center){\r\n                                    AppParam(App:#appli_id#,Name: business_scope_demo,Source: src_scope)\r\n                                    Select(Name:business_scope,Source:src_scope,NameColumn:\"name\", ValueColumn: \"id\",Value:#create_business_scope#)\r\n                                }\r\n                            }\r\n                            Div(Class: row){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(\"Business premises\")\r\n                                }\r\n                                Div(Class: col-md-9 mt-sm text-center){\r\n                                    DBFind(Name: pc_property_demo, Source: src_property).Where(\"del=0\")\r\n                                    Select(Name:business_premises,Source:src_property,NameColumn:\"name\",ValueColumn:\"id\",Value:#create_business_premises#)\r\n                                }\r\n                            }\r\n                        }\r\n                        Div(Class: panel-footer){\r\n                            Div(Class: clearfix){\r\n                                Div(Class: pull-right){\r\n                                    Button(Edit,Contract:CreateCompany,Class:btn btn-default,Page:DemoCreateCompany,Params:\"id_company=#create_id#\")\r\n                                    Button(Send,Contract:SharholdersJoint,Class:btn btn-primary,Page:DemoCreateCompany,Params:\"id_company=#create_id#\")\r\n                                }\r\n                                Div(Class: pull-left){\r\n                                    Button(Reset,Contract:ResetCompany,Class: btn btn-default,Params:\"reset_company=#create_id#\",Page:DemoCreateCompany)    \r\n                                }\r\n                            }\r\n                        }\r\n                    } \r\n                }.Else{\r\n                    Form(){\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(\"Company Name\")\r\n                                }\r\n                                Div(Class: col-md-9 mt-sm text-center){\r\n                                    Input(Name:company_name,Type:text,Class:form-control)\r\n                                }\r\n                            }\r\n                        }\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(\"Business Scope\")\r\n                                }\r\n                                Div(Class: col-md-9 mt-sm text-center){\r\n                                    AppParam(App:#appli_id#,Name: business_scope_demo,Source: src_scope)\r\n                                    Select(Name:business_scope,Source:src_scope,NameColumn:\"name\", ValueColumn: \"id\")\r\n                                }\r\n                            }\r\n                            Div(Class: row){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(\"Business premises\")\r\n                                }\r\n                                Div(Class: col-md-9 mt-sm text-center){\r\n                                    DBFind(Name: pc_property_demo, Source: src_property).Where(\"del=0\")\r\n                                    Select(Name:business_premises,Source:src_property,NameColumn:\"name\",ValueColumn:\"id\")\r\n                                }\r\n                            }\r\n                        }\r\n                        Div(Class: panel-footer){\r\n                            Div(Class: clearfix){\r\n                                Div(Class: pull-right){\r\n                                    Button(Create,Contract:CreateCompany,Class:btn btn-primary,Page:DemoCreateCompany)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            Div(Class: col-md-6 panel panel-default data-sweet-alert){\r\n                Div(Class: panel-heading){\r\n                    Div(Class: panel-title,Body: Overall progress)\r\n                }\r\n                Div(Class: panel-body){\r\n                    Div(){\r\n                        Div(){\r\n                            Span().Style(\r\n                                display:block;\r\n                                opacity: 0.7;\r\n                                content: \"\";\r\n                                position: absolute;\r\n                                bottom: calc(100% +2px);\r\n                                width: 2px;\r\n                                height: 40px;\r\n                                background-color: #7f7f7f;\r\n                                margin-left: 14px;\r\n                            )\r\n                        }\r\n                        Span(Body: Em(Class:fa fa-bell)).Style(\r\n                            display: flex;\r\n                            -webkit-box-orient: horizontal;\r\n                            -webkit-box-direction: normal;\r\n                            flex-flow: row nowrap;\r\n                            -webkit-box-pack: center;\r\n                            justify-content: center;\r\n                            -webkit-box-align: center;\r\n                            align-items: center;\r\n                            position: relative;\r\n                            min-width: 30px;\r\n                            min-height: 30px;\r\n                            max-width: 30px;\r\n                            max-height: 30px;\r\n                            border-radius: 50%;\r\n                            background-color: #7f7f7f;\r\n                            font-size: 16px;\r\n                            color: #ffffff!important;\r\n                            margin-right: 15px;\r\n                        )\r\n                        Span(Class:,Body: Approve company name)\r\n                    }.Style(\r\n                        display: flex;\r\n                        -webkit-box-orient: horizontal;\r\n                        -webkit-box-direction: normal;\r\n                        flex-flow: row nowrap;\r\n                        -webkit-box-pack: start;\r\n                        justify-content: flex-start;\r\n                        align-content: center;\r\n                        -webkit-box-align: center;\r\n                        align-items: center;\r\n                        opacity: 0.7;\r\n                        font-size: 22px;\r\n                    )\r\n                    Div(){\r\n                        Div(){Span().Style(\r\n                            display:block;\r\n                            opacity: 0.7;\r\n                            content: \"\";\r\n                            position: absolute;\r\n                            bottom: calc(100% +2px);\r\n                            width: 2px;\r\n                            height: 40px;\r\n                            background-color: #7f7f7f;\r\n                            margin-left: 14px;\r\n                            )\r\n                        }\r\n                        Span(Body: Em(Class:fa fa-bell)).Style(\r\n                            display: flex;\r\n                            -webkit-box-orient: horizontal;\r\n                            -webkit-box-direction: normal;\r\n                            flex-flow: row nowrap;\r\n                            -webkit-box-pack: center;\r\n                            justify-content: center;\r\n                            -webkit-box-align: center;\r\n                            align-items: center;\r\n                            position: relative;\r\n                            min-width: 30px;\r\n                            min-height: 30px;\r\n                            max-width: 30px;\r\n                            max-height: 30px;\r\n                            border-radius: 50%;\r\n                            background-color: #7f7f7f;\r\n                            font-size: 16px;\r\n                            color: #ffffff!important;\r\n                            margin-right: 15px;\r\n                        )\r\n                        Span(Class:,Body:Police inspection)\r\n                    }.Style(\r\n                        display: flex;\r\n                        -webkit-box-orient: horizontal;\r\n                        -webkit-box-direction: normal;\r\n                        flex-flow: row nowrap;\r\n                        -webkit-box-pack: start;\r\n                        justify-content: flex-start;\r\n                        align-content: center;\r\n                        -webkit-box-align: center;\r\n                        align-items: center;\r\n                        opacity: 0.7;\r\n                        font-size: 22px;\r\n                        margin-top: 22px;\r\n                    )\r\n                    Div(){\r\n                        Span(Body: Em(Class:fa fa-bell)).Style(\r\n                            display: flex;\r\n                            -webkit-box-orient: horizontal;\r\n                            -webkit-box-direction: normal;\r\n                            flex-flow: row nowrap;\r\n                            -webkit-box-pack: center;\r\n                            justify-content: center;\r\n                            -webkit-box-align: center;\r\n                            align-items: center;\r\n                            position: relative;\r\n                            min-width: 30px;\r\n                            min-height: 30px;\r\n                            max-width: 30px;\r\n                            max-height: 30px;\r\n                            border-radius: 50%;\r\n                            background-color: #7f7f7f;\r\n                            font-size: 16px;\r\n                            color: #ffffff!important;\r\n                            margin-right: 15px;\r\n                        )\r\n                        Span(Class:,Body:Decision of Ministry Economy)\r\n                    }.Style(\r\n                        display: flex;\r\n                        -webkit-box-orient: horizontal;\r\n                        -webkit-box-direction: normal;\r\n                        flex-flow: row nowrap;\r\n                        -webkit-box-pack: start;\r\n                        justify-content: flex-start;\r\n                        align-content: center;\r\n                        -webkit-box-align: center;\r\n                        align-items: center;\r\n                        opacity: 0.7;\r\n                        font-size: 22px;\r\n                        margin-top: 22px;\r\n                    )\r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
            "Name": "DemoCreateCompany",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Value": "SetTitle(Ministry Economy)\r\nDiv(Class: content-wrapper){\r\n    DBFind(\"notifications\",Source: src_mem).Columns(\"id,page_params->id_company\").WhereId(#notific_id#).Vars(notif)\r\n    If(#notif_page_params_id_company# > 0){\r\n        DBFind(Name:\"pc_demo_companies\",Source:src_lic).Vars(app).WhereId(#notif_page_params_id_company#)\r\n        DBFind(Name: \"pc_property_demo\",Source:src_prop).Columns(\"id,name\").Vars(property).WhereId(\"#app_business_premises#\")\r\n        DBFind(applications,src_app).Columns(\"name,id\").Where(\"name='Application form'\").Vars(appli)\r\n        Div(Class: col-md-6 panel-default data-sweet-alert){\r\n            Div(Class: list-group-item){\r\n                Span(Class: h2,Body: Ministry Economy)\r\n                Div(Class: panel-body pt0){\r\n                     DBFind(Name:pc_property_demo,Source: serch_prop).Custom(Maps){Map(Value: `#coords#`, MapType: \"satellite\", Hmap: 400)}.WhereId(\"#app_business_premises#\")\r\n                     Table(Source: serch_prop,Columns:\"Location on the map=Maps\")\r\n                }\r\n            }\r\n        }\r\n        Div(Class: col-md-6 panel-default data-sweet-alert){\r\n            Div(Class: list-group-item){\r\n                Span(Class: h3,Body: Company id: #app_id#)\r\n                Div(Class: panel-body){\r\n                    Div(Class: well box-placeholder){\r\n                        Span(Class: h4 text-bold, Body: Owner Company)\r\n                        DBFind(Name: pc_demo_companies,Source: src_kek).Columns(\"company_founder,company_founder_procent\").Vars(shar).WhereId(#app_id#)\r\n                        Div(Class: clearfix){\r\n                            Div(Class: pull-left){\r\n                                P(Class: h4, Body: \"Founder ID\")\r\n                            }\r\n                            Div(Class: pull-right){\r\n                                P(Class: h4, Body: Address(#shar_company_founder#))\r\n                            }\r\n                        }\r\n                        Div(Class: clearfix){\r\n                            Div(Class: pull-left){\r\n                                P(Class: h4, Body: \"Percentage of shares in a company\")\r\n                            }\r\n                            Div(Class: pull-right){\r\n                                P(Class: h4, Body: #shar_company_founder_procent# %)\r\n                            }\r\n                        }\r\n                    }\r\n                    Div(Class: well box-placeholder){\r\n                        Span(Class: h4 text-bold, Body: List of shareholders)\r\n                        DBFind(Name: pc_demo_sharholders,Source: src_sha).Columns(\"id_sharholder,procentsharholders,id_company\").Where(\"id_company=#app_id#\")\r\n                        ForList(Source: src_sha){\r\n                            DBFind(Name: members).Columns(\"id,member_name\").WhereId(#id_sharholder#).Vars(sharname)\r\n                            Div(Class: list-group){\r\n                                Div(Class: clearfix){\r\n                                    Div(Class: pull-left){\r\n                                        P(Class: h4, Body: \"Shareholder ID\")\r\n                                    }\r\n                                    Div(Class: pull-right){\r\n                                        P(Class: h4, Body: Address(#id_sharholder#))\r\n                                    }\r\n                                }\r\n                                Div(Class: clearfix){\r\n                                    Div(Class: pull-left){\r\n                                        P(Class: h4, Body: \"Shareholder name\")\r\n                                    }\r\n                                    Div(Class: pull-right){\r\n                                        P(Class: h4, Body: #sharname_member_name#)\r\n                                    }\r\n                                }\r\n                                Div(Class: clearfix){\r\n                                    Div(Class: pull-left){\r\n                                        P(Class: h4, Body: \"Percentage of shares in a company\")\r\n                                    }\r\n                                    Div(Class: pull-right){\r\n                                        P(Class: h4, Body: #procentsharholders#%)\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    Span(Class: h3 ,Body: \"Company detail\")\r\n                    Div(Class: clearfix){\r\n                        Div(Class: pull-left){\r\n                            P(Class: h4 text-bold, Body: \"Company name:\")\r\n                        }\r\n                        Div(Class: pull-right){\r\n                            P(Class: h4, Body: #app_company_name#)\r\n                        }\r\n                    }\r\n                    Div(Class: clearfix){\r\n                        Div(Class: pull-left){\r\n                            P(Class: h4 text-bold, Body: \"Business scope:\")\r\n                        }\r\n                        Div(Class: pull-right){\r\n                            P(Class: h4, Body: AppParam(App:#appli_id#,Name: business_scope_demo,Index:#app_business_scope#))    \r\n                        }\r\n                    }\r\n                    Div(Class: clearfix){\r\n                        Div(Class: pull-left){\r\n                            P(Class: h4 text-bold, Body: \"Bussiness premises:\")\r\n                        }\r\n                        Div(Class: pull-right){\r\n                            DBFind(Name: pc_property_demo, Source: src_property).WhereId(#app_business_premises#).Vars(promise)\r\n                            P(Class: h4, Body:#promise_name#)\r\n                        }\r\n                    }\r\n                }\r\n                Div(Class: clearfix){\r\n                    Div(Class: pull-left){\r\n                        Button(Denial,Contract:EconomyInspect,Class: btn btn-danger,Params:\"notific_id=#notific_id#,company_id = #notif_page_params_id_company#,inspect = 1\",Page:DemoCreateCompany)\r\n                    }\r\n                    Div(Class: pull-right){\r\n                        Button(Approve,Contract:EconomyInspect,Class:btn btn-success,Params:\"notific_id=#notific_id#,company_id = #notif_page_params_id_company#\",Page:DemoCreateCompany)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
            "Name": "EconomyInspection",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Value": "SetTitle(Police)\r\nDiv(Class: content-wrapper){\r\n    DBFind(\"notifications\",Source: src_mem).Columns(\"id,page_params->id_company\").WhereId(#notific_id#).Vars(notif)\r\n    If(#notif_page_params_id_company# > 0){\r\n        DBFind(Name:\"pc_demo_companies\",Source:src_lic).Vars(app).WhereId(#notif_page_params_id_company#)\r\n        DBFind(Name: \"pc_property_demo\",Source:src_prop).Columns(\"id,name\").Vars(property).WhereId(\"#app_business_premises#\")\r\n        DBFind(applications,src_app).Columns(\"name,id\").Where(\"name='Application form'\").Vars(appli)\r\n        Div(Class: col-md-6 panel-default data-sweet-alert){\r\n            Div(Class: list-group-item){\r\n                Span(Class: h2,Body: Police Departament)\r\n                Div(Class: panel-body pt0){\r\n                     DBFind(Name:pc_property_demo,Source: serch_prop).Custom(Maps){Map(Value: `#coords#`, MapType: \"satellite\", Hmap: 400)}.WhereId(\"#app_business_premises#\")\r\n                     Table(Source: serch_prop,Columns:\"Location on the map=Maps\")\r\n                }\r\n            }\r\n        }\r\n        Div(Class: col-md-6 panel-default data-sweet-alert){\r\n            Div(Class: list-group-item){\r\n                Span(Class: h3,Body: Company id: #app_id#)\r\n                Div(Class: panel-body){\r\n                    Div(Class: well box-placeholder){\r\n                        Span(Class: h4 text-bold, Body: Owner Company)\r\n                        DBFind(Name: pc_demo_companies,Source: src_kek).Columns(\"company_founder,company_founder_procent\").Vars(shar).WhereId(#app_id#)\r\n                        Div(Class: clearfix){\r\n                            Div(Class: pull-left){\r\n                                P(Class: h4, Body: \"Founder ID\")\r\n                            }\r\n                            Div(Class: pull-right){\r\n                                P(Class: h4, Body: Address(#shar_company_founder#))\r\n                            }\r\n                        }\r\n                        Div(Class: clearfix){\r\n                            Div(Class: pull-left){\r\n                                P(Class: h4, Body: \"Percentage of shares in a company\")\r\n                            }\r\n                            Div(Class: pull-right){\r\n                                P(Class: h4, Body: #shar_company_founder_procent# %)\r\n                            }\r\n                        }\r\n                    }\r\n                    Div(Class: well box-placeholder){\r\n                        Span(Class: h4 text-bold, Body: List of shareholders)\r\n                        DBFind(Name: pc_demo_sharholders,Source: src_sha).Columns(\"id_sharholder,procentsharholders,id_company\").Where(\"id_company=#app_id#\")\r\n                        ForList(Source: src_sha){\r\n                            DBFind(Name: members).Columns(\"id,member_name\").WhereId(#id_sharholder#).Vars(sharname)\r\n                            Div(Class: list-group){\r\n                                Div(Class: clearfix){\r\n                                    Div(Class: pull-left){\r\n                                        P(Class: h4, Body: \"Shareholder ID\")\r\n                                    }\r\n                                    Div(Class: pull-right){\r\n                                        P(Class: h4, Body: Address(#id_sharholder#))\r\n                                    }\r\n                                }\r\n                                Div(Class: clearfix){\r\n                                    Div(Class: pull-left){\r\n                                        P(Class: h4, Body: \"Shareholder name\")\r\n                                    }\r\n                                    Div(Class: pull-right){\r\n                                        P(Class: h4, Body: #sharname_member_name#)\r\n                                    }\r\n                                }\r\n                                Div(Class: clearfix){\r\n                                    Div(Class: pull-left){\r\n                                        P(Class: h4, Body: \"Percentage of shares in a company\")\r\n                                    }\r\n                                    Div(Class: pull-right){\r\n                                        P(Class: h4, Body: #procentsharholders#%)\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    Span(Class: h3 ,Body: \"Company detail\")\r\n                    Div(Class: clearfix){\r\n                        Div(Class: pull-left){\r\n                            P(Class: h4 text-bold, Body: \"Company name:\")\r\n                        }\r\n                        Div(Class: pull-right){\r\n                            P(Class: h4, Body: #app_company_name#)\r\n                        }\r\n                    }\r\n                    Div(Class: clearfix){\r\n                        Div(Class: pull-left){\r\n                            P(Class: h4 text-bold, Body: \"Business scope:\")\r\n                        }\r\n                        Div(Class: pull-right){\r\n                            P(Class: h4, Body: AppParam(App:#appli_id#,Name: business_scope_demo,Index:#app_business_scope#))    \r\n                        }\r\n                    }\r\n                    Div(Class: clearfix){\r\n                        Div(Class: pull-left){\r\n                            P(Class: h4 text-bold, Body: \"Bussiness premises:\")\r\n                        }\r\n                        Div(Class: pull-right){\r\n                            DBFind(Name: pc_property_demo, Source: src_property).WhereId(#app_business_premises#).Vars(promise)\r\n                            P(Class: h4, Body:#promise_name#)\r\n                        }\r\n                    }\r\n                }\r\n                Div(Class: clearfix){\r\n                    Div(Class: pull-left){\r\n                        Button(Denial,Contract:PoliceInspect,Class: btn btn-danger,Params:\"notific_id=#notific_id#,company_id = #notif_page_params_id_company#,inspect = 1\",Page:DemoCreateCompany)\r\n                    }\r\n                    Div(Class: pull-right){\r\n                        Button(Approve,Contract:PoliceInspect,Class:btn btn-success,Params:\"notific_id=#notific_id#,company_id = #notif_page_params_id_company#,premises=#app_business_premises#\",Page:DemoCreateCompany)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
            "Name": "PoliceInspection",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Value": "Div(Class: content-wrapper){\r\n    DBFind(Name:\"pc_demo_companies\",Source:src_lic).Vars(app).WhereId(#company_id#)\r\n    DBFind(Name: \"pc_property_demo\",Source:src_prop).Columns(\"id,name\").Vars(property).WhereId(\"#app_business_premises#\")\r\n    DBFind(applications,src_app).Columns(\"name,id\").Where(\"name='Application form'\").Vars(appli)\r\n    Div(Class: col-md-6 panel-default data-sweet-alert){\r\n        Div(Class: list-group-item){\r\n            Div(Class: panel-body pt0){\r\n                    DBFind(Name:pc_property_demo,Source: serch_prop).Custom(Maps){Map(Value: `#coords#`, MapType: \"satellite\", Hmap: 400)}.WhereId(\"#app_business_premises#\")\r\n                    Table(Source: serch_prop,Columns:\"Location on the map=Maps\")\r\n            }\r\n        }\r\n    }\r\n    Div(Class: col-md-6 panel-default data-sweet-alert){\r\n        Div(Class: list-group-item){\r\n            Span(Class: h3,Body: Company id: #app_id#)\r\n            Div(Class: panel-body){\r\n                Div(Class: well box-placeholder){\r\n                    Span(Class: h4 text-bold, Body: Owner Company)\r\n                    DBFind(Name: pc_demo_companies,Source: src_kek).Columns(\"company_founder,company_founder_procent\").Vars(shar).WhereId(#app_id#)\r\n                    Div(Class: clearfix){\r\n                        Div(Class: pull-left){\r\n                            P(Class: h4, Body: \"Founder ID\")\r\n                        }\r\n                        Div(Class: pull-right){\r\n                            P(Class: h4, Body: Address(#shar_company_founder#))\r\n                        }\r\n                    }\r\n                    Div(Class: clearfix){\r\n                        Div(Class: pull-left){\r\n                            P(Class: h4, Body: \"Percentage of shares in a company\")\r\n                        }\r\n                        Div(Class: pull-right){\r\n                            P(Class: h4, Body: #shar_company_founder_procent# %)\r\n                        }\r\n                    }\r\n                }\r\n                Div(Class: well box-placeholder){\r\n                    Span(Class: h4 text-bold, Body: List of shareholders)\r\n                    DBFind(Name: pc_demo_sharholders,Source: src_sha).Columns(\"id_sharholder,procentsharholders,id_company\").Where(\"id_company=#app_id#\")\r\n                    ForList(Source: src_sha){\r\n                        DBFind(Name: members).Columns(\"id,member_name\").WhereId(#id_sharholder#).Vars(sharname)\r\n                        Div(Class: list-group){\r\n                            Div(Class: clearfix){\r\n                                Div(Class: pull-left){\r\n                                    P(Class: h4, Body: \"Shareholder ID\")\r\n                                }\r\n                                Div(Class: pull-right){\r\n                                    P(Class: h4, Body: Address(#id_sharholder#))\r\n                                }\r\n                            }\r\n                            Div(Class: clearfix){\r\n                                Div(Class: pull-left){\r\n                                    P(Class: h4, Body: \"Shareholder name\")\r\n                                }\r\n                                Div(Class: pull-right){\r\n                                    P(Class: h4, Body: #sharname_member_name#)\r\n                                }\r\n                            }\r\n                            Div(Class: clearfix){\r\n                                Div(Class: pull-left){\r\n                                    P(Class: h4, Body: \"Percentage of shares in a company\")\r\n                                }\r\n                                Div(Class: pull-right){\r\n                                    P(Class: h4, Body: #procentsharholders#%)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                Span(Class: h3 ,Body: \"Company detail\")\r\n                Div(Class: clearfix){\r\n                    Div(Class: pull-left){\r\n                        P(Class: h4 text-bold, Body: \"Company name:\")\r\n                    }\r\n                    Div(Class: pull-right){\r\n                        P(Class: h4, Body: #app_company_name#)\r\n                    }\r\n                }\r\n                Div(Class: clearfix){\r\n                    Div(Class: pull-left){\r\n                        P(Class: h4 text-bold, Body: \"Business scope:\")\r\n                    }\r\n                    Div(Class: pull-right){\r\n                        P(Class: h4, Body: AppParam(App:#appli_id#,Name: business_scope_demo,Index:#app_business_scope#))    \r\n                    }\r\n                }\r\n                Div(Class: clearfix){\r\n                    Div(Class: pull-left){\r\n                        P(Class: h4 text-bold, Body: \"Bussiness premises:\")\r\n                    }\r\n                    Div(Class: pull-right){\r\n                        DBFind(Name: pc_property_demo, Source: src_property).WhereId(#app_business_premises#).Vars(promise)\r\n                        P(Class: h4, Body:#promise_name#)\r\n                    }\r\n                }\r\n                Div(Class: clearfix){\r\n                    Div(Class: pull-left){\r\n                        P(Class: h4 text-bold, Body: \"Registration Date:\")\r\n                    }\r\n                    Div(Class: pull-right){\r\n                        P(Class: h4,Body:DateTime(#app_date_register#,DD.MM.YYYY HH:MI)\r\n                    }\r\n                }\r\n            }\r\n            Div(Class: clearfix){\r\n                Div(Class: pull-right){\r\n                    Button(Back,Class:btn btn-primary,Page:DemoCompaniesList)\r\n                }\r\n            }\r\n        }\r\n    }   \r\n}",
            "Name": "ViewCompany",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Value": "Div(Class: content-wrapper){\r\n    SetTitle(Add property)\r\n\tDiv(breadcrumb){\r\n        LinkPage(Property list, demo_property_list)\r\n        Span(/).Style(margin-right: 10px; margin-left: 10px;)\r\n\t\tSpan(Class: text-muted, Body: Add Property)\r\n\t}\r\n\r\n\tDBFind(applications,src_app).Columns(\"name,id\").Where(\"name='Application form'\").Vars(appli)\r\n    DBFind(Name: pc_property_demo, Source: src_property).WhereId(\"#property_id#\").Vars(pref)\r\n\r\n    Div(Class: row){\r\n        Div(Class: col-md-3)\r\n        Div(Class: col-md-6){\r\n            Div(Class: panel panel-primary){\r\n                Div(Class: panel-heading, Body: Add property)\r\n                    Form(){\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: founder_name){\r\n                                        Span(Body: Founder)\r\n                                    }\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    DBFind(Name:members,Source:src_mem).Custom(mem_shar){[#id#] #member_name#}\r\n                                    Select(Name: property_founder, Source:src_mem, NameColumn:\"mem_shar\", ValueColumn: \"id\",Value: #pref_member_id#)\r\n                                } \r\n                            }\r\n                        }\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: property_type){\r\n                                        Span(Body: Property type)\r\n                                    }\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    AppParam(App:#appli_id#,Name: property_type,Source: src_property_type)\r\n\t\t\t\t\t\t\t        Select(Name: property_type, Source: src_property_type, NameColumn: name, ValueColumn: id,Value: #pref_type#) \r\n                                } \r\n                            }\r\n                        }\r\n                        Div(Class: list-group-item){\r\n                            Div(Class: row){\r\n                                Div(Class: col-md-3 mt-sm text-right){\r\n                                    Label(For: property_map){\r\n                                        Span(Body: Map)\r\n                                    }\r\n                                }\r\n                                Div(Class: col-md-9 mc-sm text-left){\r\n                                    If(#property_id#>0){\r\n\t\t\t\t\t\t\t\t\t    InputMap(Name: property_map, Type: polygon, MapType: hybrid, Value: `#pref_coords#`)\r\n\t\t\t\t\t\t\t\t    }.Else{\r\n\t\t\t\t\t\t\t\t\t    InputMap(Name: property_map, Type: polygon, MapType: hybrid, Value: `{\"zoom\":10, \"center\":{\"lat\":51.480842,\"lng\":-0.122040}}`)\r\n                                    }\r\n\t\t\t\t\t\t\t\t}\r\n                            } \r\n                        }\r\n                        Div(Class: panel-footer clearfix){\r\n                            Div(Class: pull-right){\r\n                                Button(Body: Back, Class: btn btn-default, Page: demo_property_list)\r\n                                If(#property_id# > 0){\r\n                                    Button(Body: Save, Class: btn btn-primary, Page: demo_property_list, Contract: property_add,Params:\"property_id=#property_id#\")\r\n                                }.Else{\r\n                                    Button(Body: Save, Class: btn btn-primary, Page: demo_property_list, Contract: property_add)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            Div(Class: col-md-3)\r\n        }\r\n    }\r\n}",
            "Name": "addProperty",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "ContractAccess(\"@1EditPage\")",
            "Value": "SetTitle(Property list)\r\nDiv(Class: content-wrapper){\r\n    AddToolButton(Add property, fa fa-plus-circle, addProperty, PageParams)\r\n    DBFind(Name:pc_property_demo,Source: src_prop).Custom(typ){\r\n        DBFind(applications,src_app).Columns(\"name,id\").Where(\"name='Application form'\").Vars(appli)\r\n        Span(Body: AppParam(App:#appli_id#,Name: property_type,Index: #type#))\r\n    }.Custom(Maps){\r\n        Map(Value: `#coords#`, MapType: \"satellite\", Hmap: 80)\r\n    }.Custom(custom_username){\r\n        DBFind(members, src_members).Vars(\"mem\").WhereId(#member_id#)\r\n        Span(Class: h5 text-bold, Body: #mem_member_name#)\r\n\t}.Custom(owners_id){\r\n        Span(Class: h5 , Body: #member_id#)\r\n    }.Custom(custom_edit){\r\n        Div(Class: pull-right){ \r\n            Span(){\r\n                Button(Class: btn btn-danger, Body: Em(Class:fa fa-close), Contract: property_del, Params: \"property_id=#id#\", Page:demo_property_list).Alert(Text: Do you want to delete?, ConfirmButton: $yes$, CancelButton: $no$, Icon: question)\r\n            }.Style(margin-right: 30px;)\r\n            Span(){\r\n                Button(Class: btn btn-default, Body: Em(Class:fa icon-note), Page:addProperty, PageParams: \"property_id=#id#\")\r\n            }\r\n        }\r\n\t}.Custom(policeinsp){\r\n        Div(Class: text-center ){\r\n            If(#police_inspection# == 1){\r\n                Span(Class:text-success,Body:Em(Class:\"fa fa-2x fa-check-circle\"))\r\n            }.Else{\r\n                Span(Class:text-danger,Body:Em(Class:\"fa fa-2x fa-exclamation-circle\"))\r\n            }\r\n        }\r\n    }.Where(del=0)\r\n    Div(Class:col-md-12 panel panel-primary data-sweet-alert){\r\n        Table(Source: src_prop,Columns:\"ID=id,Location on the map=Maps,Address=name,Owner Name=custom_username,Owner ID= owners_id,Type=typ,Police=policeinsp,=custom_edit\")\r\n    }\r\n}",
            "Name": "demo_property_list",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract CreateCompany {\r\n    data {\r\n        id_company int \"optional\"\r\n        company_name string\r\n        business_scope int\r\n        business_premises int\r\n    }\r\n    conditions {\r\n        var validatecompany map\r\n        validatecompany = DBFind(\"pc_demo_companies\").Where(\"company_name = ? and status > 0 and status != 4\", $company_name).Row()\r\n        if(validatecompany[\"company_name\"]){\r\n            warning(\"A company with this name is already registered\")\r\n        }\r\n    }\r\n    action {\r\n        if ($id_company > 0){\r\n            DBUpdate(\"pc_demo_companies\",$id_company,\"business_scope,company_name,business_premises\",$business_scope,$company_name,$business_premises)\r\n        }\r\n        else{\r\n            DBInsert(\"pc_demo_companies\",\"business_scope,company_name,company_founder,status,business_premises\",$business_scope,$company_name,$key_id,1,$business_premises)\r\n        }\r\n    }\r\n}",
            "Name": "CreateCompany",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract DemoEconomyInspection {\r\n    data {\r\n        id_company int \r\n    }\r\n\r\n    conditions {\r\n        \r\n    }\r\n\r\n    action {\r\n        var ret map\r\n        ret = DBFind(\"pc_demo_companies\").WhereId($id_company).Row()\r\n         \r\n        if (ret[\"status\"] == 5){\r\n            DBUpdate(\"pc_demo_companies\", $id_company, \"timestamp date_register\",$block_time)\r\n        }\r\n        else {\r\n            var params map\r\n            params[\"id_company\"] = $id_company\r\n            notifications_Send(\"member_id,icon_name,text_header,text_body,page_name,params_map,sender\", $key_id,\"fa-bell\",\"New request\",\"Need your confirmation\",\"EconomyInspection\",JSONEncode(params),1)\r\n        }\r\n    }\r\n}",
            "Name": "DemoEconomyInspection",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract DemoPoliceInspection {\r\n    data {\r\n        id_company int \r\n    }\r\n\r\n    conditions {\r\n        \r\n    }\r\n\r\n    action {\r\n        var ret map\r\n        ret = DBFind(\"pc_demo_companies\").WhereId($id_company).Row()\r\n        \r\n        var insp map\r\n        insp = DBFind(\"pc_property_demo\").Where(\"id = ?\",ret[\"business_premises\"]).Row()\r\n        \r\n        if (insp[\"police_inspection\"] == 1){\r\n            DBUpdate(\"pc_demo_companies\",$id_company,\"status\",3)\r\n            DemoEconomyInspection(\"id_company\",$id_company)\r\n        }\r\n        else {\r\n            var params map\r\n            params[\"id_company\"] = $id_company\r\n            notifications_Send(\"member_id,icon_name,text_header,text_body,page_name,params_map,sender\", $key_id,\"fa-bell\",\"New request\",\"Need your confirmation\",\"PoliceInspection\",JSONEncode(params),1)\r\n        }\r\n    }\r\n}",
            "Name": "DemoPoliceInspection",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract EconomyInspect {\r\n    data {\r\n        company_id int\r\n        notific_id int\r\n        inspect int \"optional\"\r\n    }\r\n    conditions {\r\n        \r\n    }\r\n    action {\r\n        if($inspect == 1){\r\n            DBUpdate(\"pc_demo_companies\",$company_id,\"status\",4)\r\n            notifications_Close(\"notific_id\",$notific_id) \r\n        }\r\n        else{\r\n            DBUpdate(\"pc_demo_companies\", $company_id, \"status\",5)\r\n            DemoEconomyInspection(\"id_company\",$company_id)\r\n            notifications_Close(\"notific_id\",$notific_id) \r\n        }\r\n    }\r\n}",
            "Name": "EconomyInspect",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract NewCompany {\r\n    data {\r\n        company_id int\r\n    }\r\n\r\n    conditions {\r\n\r\n    }\r\n\r\n    action {\r\n        DBUpdate(\"pc_demo_companies\", $company_id, \"status\",6)\r\n    }\r\n}",
            "Name": "NewCompany",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract PoliceInspect {\r\n    data {\r\n        company_id int\r\n        premises int \"optional\"\r\n        notific_id int\r\n        inspect int \"optional\"\r\n    }\r\n    conditions {\r\n        \r\n    }\r\n    action {\r\n        if($inspect == 1){\r\n            DBUpdate(\"pc_demo_companies\",$company_id,\"status\",4)\r\n            notifications_Close(\"notific_id\",$notific_id) \r\n        }\r\n        else{\r\n            DBUpdate(\"pc_property_demo\", $premises, \"police_inspection\",1)\r\n            DemoPoliceInspection(\"id_company\",$company_id)\r\n            notifications_Close(\"notific_id\",$notific_id) \r\n        }\r\n    }\r\n}",
            "Name": "PoliceInspect",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract ResetCompany {\r\n    data {\r\n        reset_company int\r\n    }\r\n    conditions {\r\n\r\n    }\r\n    action {\r\n         DBUpdate(\"pc_demo_companies\",$reset_company,\"status\",4)\r\n    }\r\n}",
            "Name": "ResetCompany",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract SharholdersJoint {\r\n    data {\r\n        id_company int\r\n        founderProcent int\r\n        procentSharholders array \"optional\"\r\n        person_id array \"optional\"\r\n    }\r\n\r\n    conditions {\r\n        var i int\r\n        var summa string\r\n        var total string\r\n        while i < Len($person_id) {\r\n            summa = Int($procentSharholders[i]) + Int(summa)\r\n            i = i + 1\r\n        }\r\n        total = summa + $founderProcent\r\n        if (total > 100){\r\n            warning(\"The amount of interest can not exceed 100\")\r\n        }\r\n        if (total < 100){\r\n            warning(\"The interest amount can not be less than 100\")\r\n        }\r\n    }\r\n\r\n    action {\r\n        var i int\r\n        var col_arr array\r\n\r\n\r\n        while i < Len($person_id) {\r\n            var col_map map\r\n            col_map[\"sharholders\"] = $person_id[i]\r\n            col_map[\"procentsharholders\"] = $procentSharholders[i]\r\n            col_arr[i] = col_map\r\n            DBInsert(\"pc_demo_sharholders\",\"id_sharholder,procentsharholders,id_company\",Int($person_id[i]),Int($procentSharholders[i]),$id_company)\r\n            i = i + 1\r\n        } \r\n        var params string\r\n        params = JSONEncode(col_arr)\r\n        \r\n        DBUpdate(\"pc_demo_companies\",$id_company,\"company_founder_procent,shareholders,status\",$founderProcent,params,2)\r\n\r\n        DemoPoliceInspection(\"id_company\",$id_company)\r\n    }\r\n}",
            "Name": "SharholdersJoint",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract property_add{\r\n    data {\r\n        property_founder int\r\n        property_type int\r\n        property_map string\r\n        property_id int \"optional\"\r\n    }\r\n\r\n    conditions {\r\n       \r\n        var map_data map\r\n        map_data = JSONToMap($property_map)\r\n\r\n        $property_map_coords = map_data[\"coords\"]\r\n        $property_map_area = map_data[\"area\"]\r\n        $property_map_address = map_data[\"address\"]\r\n\r\n\t\tif ($property_map_address == \"\"){\r\n\t\t\twarning \"Address is empty. Select another site or enter the address manually\"\r\n\t\t}\r\n\r\n\t\tif ($property_map_area == 0){\r\n\t\t\twarning \"Area is zero. Select another site\"\r\n\t\t}\r\n    }\r\n\r\n    action {\r\n        if ($property_id > 0) {\r\n            DBUpdate(\"pc_property_demo\", $property_id, \"name,type,coords,member_id,police_inspection,area\",$property_map_address,$property_type,$property_map,$property_founder,0,$property_map_area)\r\n        } \r\n        else {\r\n            DBInsert(\"pc_property_demo\", \"name,type,coords,member_id,area\",$property_map_address,$property_type,$property_map,$property_founder,$property_map_area)   \r\n        }\r\n    }\r\n}",
            "Name": "property_add",
            "Type": "contracts"
        },
        {
            "Conditions": "ContractConditions(\"MainCondition\")",
            "Value": "contract property_del {\r\n    data {\r\n        property_id int\r\n    }\r\n\r\n    conditions {\r\n\r\n    }\r\n\r\n    action {\r\n        DBUpdate(\"pc_property_demo\",$property_id,\"del\",1)\r\n    }\r\n}",
            "Name": "property_del",
            "Type": "contracts"
        }
    ]
}